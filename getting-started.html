<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &#8212; pyqtlet beta documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Documentation" href="api-docs.html" />
    <link rel="prev" title="Pyqtlet" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<img alt="_images/maps_are_beautiful2.jpg" class="align-center" src="_images/maps_are_beautiful2.jpg" />
<p>Maps are beautiful. They can convey information in a way that words and graphs cannot.
As a GIS company, we have many occassions where maps are absolutely critical to
show our outputs. Pyqtlet was partly built out of a frustration of having to use
Google Earth and KML files for all our mapping needs.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">pyqtlet was designed for people familiar with both <a class="reference external" href="http://zetcode.com/gui/pyqt5/">PyQt5</a> and <a class="reference external" href="https://leafletjs.com/examples/quick-start/">Leaflet</a>.
It is suggested you go through the respective guides if not already familiar.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>pyqtlet does not have any external dependencies apart from PyQt5. So if you already
have pyqtlet installed, then you just need to copy the pyqtlet folder into your
project folder. You may also install pyqtlet  from pip. This will install PyQt5 if
it has not been installed already.</p>
<div class="code sh highlight-default"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">pyqtlet</span>
</pre></div>
</div>
<p>Now you&#8217;re just an import statement away.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyqtlet</span> <span class="k">import</span> <span class="n">L</span><span class="p">,</span> <span class="n">MapWidget</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>MapWidget should be used like any other QWidget. The first pyqtlet object to be
created needs to be the L.map, along with a reference to the map widget.
If you try creating any other pyqtlet object before the map, or the map without the
map widget, you will get an error.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># within a QWidget</span>
<span class="bp">self</span><span class="o">.</span><span class="n">mapWidget</span> <span class="o">=</span> <span class="n">MapWidget</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">map</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapWidget</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapWidget</span><span class="p">)</span>
</pre></div>
</div>
<p>Once this has been set up, <code class="code docutils literal"><span class="pre">self.map</span></code>, and pyqtlet as a whole have methods
very similar to leaflet itself. So in case you want to set the view, set a basemap,
and add some markers, the code would look something like this...</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">setView</span><span class="p">([</span><span class="mf">12.97</span><span class="p">,</span> <span class="mf">77.59</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">L</span><span class="o">.</span><span class="n">tileLayer</span><span class="p">(</span><span class="s1">&#39;http://</span><span class="si">{s}</span><span class="s1">.tile.osm.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">addTo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">marker</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">marker</span><span class="p">([</span><span class="mf">12.934056</span><span class="p">,</span> <span class="mf">77.610029</span><span class="p">])</span>
<span class="bp">self</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">bindPopup</span><span class="p">(</span><span class="s1">&#39;Maps are a treasure.&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">marker</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, a lot of the other leaflet objects can be found in the <code class="code docutils literal"><span class="pre">L</span></code> namespace.
So polygons, circle markers and feature groups can also be added using code that is
essentially identical to its JS counterpart.</p>
</div>
<div class="section" id="accessing-state-of-the-map">
<h2>Accessing state of the map<a class="headerlink" href="#accessing-state-of-the-map" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, it is necessary to access different state attributes of the map. pyqtlet
allows this to be done. The variables cannot currently be directly returned by the
functions, so a callback approach is followed whenever we need to access state of
the map</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setZoomWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="n">zoom</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s1">&#39;zoom&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">zoom</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Woah buddy. You</span><span class="se">\&#39;</span><span class="s1">re flying </span><span class="se">\</span>
<span class="s1">            pretty high. Hope you don</span><span class="se">\&#39;</span><span class="s1">t have vertigo..&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Yup, no worries. A fall from </span><span class="se">\</span>
<span class="s1">            here shoudn</span><span class="se">\&#39;</span><span class="s1">t hurt... too much.&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">setWarnings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">getZoom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">setZoomWarning</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, we can access different state variables of Leaflet. There is also a custom
function called <code class="code docutils literal"><span class="pre">L.map.getState()</span></code> that allows you to get all of the map parameters
that leaflet allows you to access. This was written to prevent excessive callback depth
in case multiple map state variables are required.</p>
</div>
<div class="section" id="drawing">
<h2>Drawing<a class="headerlink" href="#drawing" title="Permalink to this headline">¶</a></h2>
<p>Since a large benefit of having maps is allowing users to draw on them, pyqtlet includes
<cite>Leaflet.draw</cite> by default. Since editting is a fairly core functionality of drawing, and
setting it up in leaflet is a little cumbersome, pyqtlet sets it all up in case the user
doesn&#8217;t want to.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># in __init__ or elsewhere</span>
<span class="bp">self</span><span class="o">.</span><span class="n">drawControl</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">addControl</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drawControl</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to get what the user has drawn, we will need to access the featureGroup of the
draw control. So to print what the user has drawn as a geojson.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">drawControl</span><span class="o">.</span><span class="n">featureGroup</span><span class="o">.</span><span class="n">toGeoJSON</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
<p>Default initialisation of the draw control creates a <cite>L.FeatureGroup</cite> and adds it to the
map, and sets it as the edit
layer for <cite>L.Draw</cite>, and automatically takes care of adding all the drawn items to it.
It also sets the default position as <code class="code docutils literal"><span class="pre">'topleft'</span></code>, disables drawing of rectangles
and circles.</p>
<p>All of these can be overriden. So editting can be disabled by setting the <code class="code docutils literal"><span class="pre">'edit'</span></code>
key in the options as <cite>False</cite>. Similarly you can use your own featureGroup as the edittable
featureGroup by passing it as a parameter.</p>
<p>Additionally, if you want to handle what gets
added to the featureGroup, you can setting <code class="code docutils literal"><span class="pre">handleFeatureGroup</span></code> as <code class="code docutils literal"><span class="pre">False</span></code>
while initiating the draw control. Then using <code class="code docutils literal"><span class="pre">L.map.drawCreated</span></code> and <code class="code docutils literal"><span class="pre">L.featureGroup.createAndAddDrawnLayer</span></code>
you can manually handle all the drawn shapes that are added to the map.</p>
</div>
<div class="section" id="events-and-signals">
<h2>Events and Signals<a class="headerlink" href="#events-and-signals" title="Permalink to this headline">¶</a></h2>
<p>Leaflet and PyQt handle signals and events in different ways. pyqtlet follows the
PyQt system of <code class="code docutils literal"><span class="pre">pyqtSignal</span></code> and <code class="code docutils literal"><span class="pre">pyqtSlot</span></code> to pass around events. So
all the leaflet events have been appropriately mapped to a signal of the same name.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="bp">self</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">zoomend</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">loadAssetByZoom</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly any other can be accessed as a <code class="code docutils literal"><span class="pre">pyqtSignal</span></code>. The signals from Leaflet.draw
are all prefixed with <cite>draw</cite> and are camel cased accordingly. So <code class="code docutils literal"><span class="pre">'draw:created'</span></code>
becomes <code class="code docutils literal"><span class="pre">drawCreated</span></code> and so on.</p>
</div>
<div class="section" id="custom-js-code">
<h2>Custom JS code<a class="headerlink" href="#custom-js-code" title="Permalink to this headline">¶</a></h2>
<p>In case there is some JS code that needs to be run, which hasn&#8217;t already been implemented
in pyqtlet, or is causing some kind of bug, that can also be done. If js objects need to
be used, their variable names in the leaflet runtime can be accessed from the <code class="code docutils literal"><span class="pre">.jsName</span></code>
attribute.</p>
<p>If a response is expected from js, then the same callback approach will need to be followed</p>
<p>With all the implemented pyqtlet functionality, <cite>runJavaScript</cite> and <cite>getJsResponse</cite>, pretty
much all the basic use cases have been covered.</p>
<hr class="docutils" />
<p>This should be enough to get you started and build all the basic functionality that you
might expect and need from a map. Further documentation on the API can be found on the
<a class="reference internal" href="api-docs.html"><span class="doc">API Documentation</span></a> page. In case you are interested in the technical details and implementation details,
you can refer to the <a class="reference internal" href="technical.html"><span class="doc">Implementation Details</span></a> page. For going deeper into the different use cases
that pyqtlet allows, refer to the <a class="reference internal" href="tutorials.html"><span class="doc">Tutorials</span></a> page.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyqtlet</a></h1>








<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Pyqtlet</a></li>
      <li>Next: <a href="api-docs.html" title="next chapter">API Documentation</a></li>
  </ul></li>
</ul>
</div><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-state-of-the-map">Accessing state of the map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#drawing">Drawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events-and-signals">Events and Signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-js-code">Custom JS code</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical.html">Implementation Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Skylark Drones.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/getting-started.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>